<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Galaga Rocket Game</title>
<style>
  body { margin: 0; background: black; overflow: hidden; }
  canvas { display: block; margin: auto; background: black; }
</style>
</head>
<body>
<canvas id="gameCanvas" width="600" height="800"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

let keys = {};
document.addEventListener("keydown", (e) => keys[e.key] = true);
document.addEventListener("keyup", (e) => keys[e.key] = false);

// Player rocket
const player = {
  x: canvas.width/2 - 20,
  y: canvas.height - 60,
  width: 40,
  height: 40,
  speed: 5,
  color: "cyan"
};

// Bullets
let bullets = [];
function shoot() {
  bullets.push({x: player.x + player.width/2 - 2, y: player.y, width: 4, height: 10, color: "yellow"});
}

// Enemies
let enemies = [];
const enemyRows = 3;
const enemyCols = 6;
for(let r = 0; r < enemyRows; r++) {
  for(let c = 0; c < enemyCols; c++) {
    enemies.push({
      x: 60 + c*80,
      y: 60 + r*60,
      width: 40,
      height: 40,
      color: "red",
      dx: 1
    });
  }
}

// Game loop
function update() {
  // Move player
  if(keys["ArrowLeft"] && player.x > 0) player.x -= player.speed;
  if(keys["ArrowRight"] && player.x + player.width < canvas.width) player.x += player.speed;
  if(keys[" "] && bullets.length < 5) shoot();

  // Move bullets
  bullets.forEach((b, i) => {
    b.y -= 7;
    if(b.y + b.height < 0) bullets.splice(i, 1);
  });

  // Move enemies
  let shouldReverse = false;
  enemies.forEach(e => {
    e.x += e.dx;
    if(e.x + e.width > canvas.width || e.x < 0) shouldReverse = true;
  });
  if(shouldReverse) {
    enemies.forEach(e => {
      e.dx *= -1;
      e.y += 20;
    });
  }

  // Collision detection
  bullets.forEach((b, bi) => {
    enemies.forEach((e, ei) => {
      if(b.x < e.x + e.width && b.x + b.width > e.x &&
         b.y < e.y + e.height && b.y + b.height > e.y) {
        bullets.splice(bi,1);
        enemies.splice(ei,1);
      }
    });
  });
}

// Drawing
function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // Draw player
  ctx.fillStyle = player.color;
  ctx.fillRect(player.x, player.y, player.width, player.height);
  // Draw bullets
  bullets.forEach(b => {
    ctx.fillStyle = b.color;
    ctx.fillRect(b.x, b.y, b.width, b.height);
  });
  // Draw enemies
  enemies.forEach(e => {
    ctx.fillStyle = e.color;
    ctx.fillRect(e.x, e.y, e.width, e.height);
  });
}

// Main loop
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
